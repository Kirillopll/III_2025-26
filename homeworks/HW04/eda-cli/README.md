# S04 – eda_cli: HTTP-сервис качества датасетов (FastAPI)

Проект является расширенной версией `eda-cli`, разработанного в рамках Семинара 03.  
К существующему CLI-приложению для Exploratory Data Analysis (EDA) добавлен
**HTTP-сервис на FastAPI**, предоставляющий REST-доступ к логике оценки качества данных.

Проект используется в рамках курса **«Инженерия ИИ»**, семинар **S04**.

---

## Связь с S03

Проект S04 напрямую основан на решении S03:

- сохранена структура пакета `src/eda_cli/`;
- CLI-команда `eda-cli` полностью работоспособна;
- EDA-ядро (`core.py`) переиспользуется без дублирования кода;
- добавлен модуль `api.py` с HTTP-сервисом;
- в зависимости добавлены `fastapi` и `uvicorn[standard]`.

Основная цель S04 — показать, как существующую EDA-логику можно
обернуть в HTTP-сервис.

---

## Требования

- Python 3.11+
- установленный инструмент [uv](https://docs.astral.sh/uv/)
- браузер для работы со Swagger UI (`/docs`) или любой HTTP-клиент
  (`curl`, Postman, HTTP-клиент IDE и т.п.)

---

## Инициализация проекта

Из корня проекта (`homeworks/HW04/eda-cli`) выполните:

```bash
uv sync
```
Команда:

создаёт виртуальное окружение .venv;

устанавливает зависимости из pyproject.toml;

устанавливает пакет eda-cli в окружение.

Запуск CLI (как в S03)
CLI-интерфейс остаётся доступным и в S04.

Краткий обзор датасета
bash
Копировать код
uv run eda-cli overview data/example.csv
Параметры:

--sep — разделитель CSV (по умолчанию ,);

--encoding — кодировка файла (по умолчанию utf-8).

Генерация полного EDA-отчёта
bash
Копировать код
uv run eda-cli report data/example.csv --out-dir reports
В каталоге reports/ будут сгенерированы:

report.md — основной Markdown-отчёт;

summary.csv — сводка по колонкам;

missing.csv — информация о пропусках;

correlation.csv — корреляционная матрица (при наличии числовых признаков);

top_categories/*.csv — top-k категорий по строковым признакам;

графики:

hist_*.png,

missing_matrix.png,

correlation_heatmap.png.

Запуск HTTP-сервиса
HTTP-сервис реализован в модуле eda_cli.api с использованием FastAPI.

Запуск сервера Uvicorn
bash
Копировать код
uv run uvicorn eda_cli.api:app --reload --port 8000
Пояснения:

eda_cli.api:app — путь к объекту FastAPI app;

--reload — автоматический перезапуск при изменении кода;

--port 8000 — порт сервиса.

После запуска сервис будет доступен по адресу:

dts
Копировать код
http://127.0.0.1:8000
Swagger UI
Интерактивная документация доступна по адресу:

dts
Копировать код
http://127.0.0.1:8000/docs
Через Swagger UI можно:

проверить состояние сервиса;

отправлять запросы к API;

загружать CSV-файлы и получать ответы без внешних клиентов.

Эндпоинты сервиса
1. GET /health
Служебный эндпоинт для проверки состояния сервиса.

Ответ (200 OK):

json
Копировать код
{
  "status": "ok",
  "service": "dataset-quality",
  "version": "0.2.0"
}
2. POST /quality
Эндпоинт-заглушка для оценки качества датасета по агрегированным признакам.

Принимает JSON с параметрами:

размеры датасета;

доля пропусков;

количество числовых и категориальных признаков.

Возвращает:

интегральный quality_score;

флаг ok_for_model;

диагностические булевы флаги;

время обработки запроса.

3. POST /quality-from-csv
Эндпоинт для оценки качества на основе реального CSV-файла.

Внутри:

CSV считывается в pandas.DataFrame;

используются функции из eda_cli.core:

summarize_dataset,

missing_table,

compute_quality_flags;

формируется ответ с оценкой качества и флагами.

4. POST /quality-flags-from-csv (дополнительный эндпоинт)
Дополнительный эндпоинт, реализованный в рамках HW04.

Назначение:

вернуть полный набор флагов качества датасета;

продемонстрировать доработки EDA-логики из S03.

Возвращает словарь флагов, вычисленных функцией compute_quality_flags.

Структура проекта
text
Копировать код
homeworks/HW04/
  eda-cli/
    pyproject.toml
    README.md
    src/
      eda_cli/
        __init__.py
        core.py
        viz.py
        cli.py
        api.py
    tests/
      test_core.py
    data/
      example.csv
Тесты
EDA-ядро покрыто модульными тестами.

Запуск тестов:

bash
Копировать код
uv run pytest -q
Перед сдачей рекомендуется:

запустить тесты;

проверить работу CLI;

проверить работу HTTP-сервиса через /docs.

Итог
В рамках Семинара 04:

сохранена и переиспользована логика EDA из S03;

реализован HTTP-сервис на FastAPI;

добавлен обязательный дополнительный эндпоинт;

проект соответствует требованиям S04 и готов к проверке.

yaml
Копировать код

---

Если нужно — дальше могу **ничего не переписывая**:
- проверить этот README на соответствие автотестам по ключевым словам;
- сократить его под конкретного преподавателя;
- или сказать: *да, это финал, сдавай*.